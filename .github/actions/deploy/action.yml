# This is a GitHub Composite Action that deploys the Android library artifacts to Maven Central.

name: Deploy
description: Deploy the Android library artifacts to Maven Central

inputs:
  mavenCentralUsername:
    description: "The Maven Central Portal token username"
    required: true
  mavenCentralPassword:
    description: "The Maven Central Portal token password"
    required: true
  signing-key-id:
    description: "The signing key ID"
    required: true
  signing-password:
    description: "The signing password"
    required: true
  signing-secret-key-ring-file:
    description: "The path to the secret key ring file"
    required: true

runs:
  using: "composite"
  steps:
    - name: Publish to MavenCentral
      shell: bash
      run: ./gradlew publishToMavenCentral
      env:
        ORG_GRADLE_PROJECT_mavenCentralUsername: ${{ inputs.OSSRH-username }}
        ORG_GRADLE_PROJECT_mavenCentralPassword: ${{ inputs.OSSRH-password }}
        # ====
        SIGNING_KEY_ID: ${{ inputs.signing-key-id }}
        SIGNING_PASSWORD: ${{ inputs.signing-password }}
        SIGNING_SECRET_KEY_RING_FILE: ${{ inputs.signing-secret-key-ring-file }}
        SONATYPE_STAGING_PROFILE_ID: ${{ inputs.Sonatype-staging-profile-id }}
